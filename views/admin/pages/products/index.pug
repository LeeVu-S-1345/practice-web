extends ../../layouts/default.pug

include ../../mixins/filter-status.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/alert.pug

block main
    +alert-success(4000)
    
    h1 Products Page

    .card.mb-3
        .card-header Fitler & Search
        .card-body
            .row
                .col-6             
                    +filter-status(filterStatus)
                .col-6
                    +search(keyword)
    
    .card.mb-3
        .card-header List of Products
        .card-body
            .row
                .col-9
                .col-3
                    a(
                        href=`${prefixAdmin}/products/create`
                        class='btn btn-outline-success'
                    ) + Add new products
            table.table.table-hover.table-sm
                thead
                    tr
                        th ID
                        th Name
                        th Price
                        th Status
                        th Actions
                tbody
                    each item in products 
                        tr
                            td #{item.prod_id}
                            td #{item.name}
                            td #{item.price}
                            td
                                if(item.status == 'active')
                                    a(
                                        href='javascript:;'
                                        data-status='active'
                                        data-id=item.prod_id
                                        button-change-status
                                        class="badge bg-success"
                                    ) Active
                                else
                                    a(
                                        href='javascript:;'
                                        data-status='inactive'
                                        data-id=item.prod_id
                                        button-change-status
                                        class="badge bg-danger"
                                    ) Inactive
                            td
                                a(
                                    href=`${prefixAdmin}/products/detail/${item.prod_id}`
                                    class="btn btn-secondary btn-sm"
                                ) Detail
                                a(
                                    href=`${prefixAdmin}/products/edit/${item.prod_id}`
                                    class="btn btn-warning btn-sm"
                                ) Edit
                                button(
                                    class="btn btn-danger btn-sm ml-1"
                                    button-delete
                                    data-id=item.prod_id
                                ) Delete
    +pagination(pagination)

    form(
        action=""
        method="POST"
        id="form-change-status"
        data-path=`${prefixAdmin}/products/change-status`
    )

    form(
        action=""
        method="POST"
        id="form-delete-product"
        data-path=`${prefixAdmin}/products/delete`
    )

    script(src="/admin/js/product.js")